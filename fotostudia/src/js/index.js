window.addEventListener("DOMContentLoaded",function(){"use strict";function ei(){return k==2&&(k=0),k++}function ot(){i<n.length-2&&(tt.style.transform=`translateX(${i*-16.5}%)`,i++)}function kt(){i>0&&(i--,tt.style.transform=`translateX(${i*-16.5}%)`)}function si(){for(let t=0;t<n.length-1;t++)if(n[t].classList.contains("gallery__item-svape")){n[t+1].classList.add("gallery__item-svape");n[t].classList.remove("gallery__item-svape");y.forEach(function(n){n.classList.remove("gallery__dots-svape")});y[t+1].classList.add("gallery__dots-svape");break}}function hi(){for(let t=0;t<=n.length-1;t++)if(n[t].classList.contains("gallery__item-svape")){n[t-1].classList.add("gallery__item-svape");n[t].classList.remove("gallery__item-svape");y.forEach(function(n){n.classList.remove("gallery__dots-svape")});y[t-1].classList.add("gallery__dots-svape");break}}function ai(){if(c>0){r[c].style.display="none";let n=--c;r[n].style.display="block"}}function vi(){if(c<r.length-1){r[c].style.display="none";let n=++c;r[n].style.display="block"}}function yi(){y.forEach(function(n){n.classList.remove("gallery__dots-svape")})}function pi(){n.forEach(function(n){n.classList.remove("gallery__item-svape")});n[u].classList.add("gallery__item-svape")}function wi(){u==0&&(i=u+1,kt());(u>=1||u>=n.length-2)&&(i=u-1,ot());u==n.length-1&&(i=u-2,ot())}function ht(){let n=d[it].cloneNode(!0),i=n.querySelectorAll(".slider__item");i.forEach(function(n){n.addEventListener("click",function(){p.style.display="block";e=this.dataset.max-1;t[this.dataset.max-1].style.display="block";console.log(t[this.dataset.max-1])})});n.style.left=gt*st+"px";bi.append(n);it+1==d.length?it=0:it++;gt=1}function rt(n){n.target.removeEventListener("click",rt);let t=document.querySelectorAll(".slide"),i=0;for(let n=0;n<t.length;n++)t[n].style.left=st*i-st+"px",i++;setTimeout(function(){t[0].remove();ht();n.target.addEventListener("click",rt)},600)}function ir(){if(e>0){t[e].style.display="none";let n=--e;t[n].style.display="block"}}function rr(){if(e<t.length-1){t[e].style.display="none";let n=++e;t[n].style.display="block"}}function ar(n){let t=document.createElement("div"),i=document.createElement("div");i.innerHTML=`<svg width="32" class='form-file-close' height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g opacity="0.7" clip-path="url(#clip0_85_588)">
    <path d="M15.9993 2.66699C8.63935 2.66699 2.66602 8.64033 2.66602 16.0003C2.66602 23.3603 8.63935 29.3337 15.9993 29.3337C23.3594 29.3337 29.3327 23.3603 29.3327 16.0003C29.3327 8.64033 23.3594 2.66699 15.9993 2.66699Z" fill="white"/>
    <path d="M10 10L22 22" stroke="#CBCBCB" stroke-width="2" stroke-linecap="round"/>
    <path d="M22 10L10 22" stroke="#CBCBCB" stroke-width="2" stroke-linecap="round"/>
    </g>
    <defs>
    <clipPath id="clip0_85_588">
    <rect width="32" height="32" fill="white"/>
    </clipPath>
    </defs>
    </svg>`;t.classList.add("form-preview");t.append(i);t.append(n);nt.append(t);let r=t.offsetHeight;vr(r);yr(i,t)}function vr(n){et.style.height=at+n+"px";ft.style.height=vt+n+"px";nt.style.height=lt+n+"px";l.style.overflow="scroll"}function yr(n,t){n.addEventListener("click",function(){t.remove();n.remove();et.style.height=at+"px";ft.style.height=vt+"px";nt.style.height=lt+"px";l.style.overflow="visible"})}const a=document.querySelector("#reviews__form"),f=document.querySelector(".modal1"),ui=document.querySelectorAll(".modal1__close"),fi=document.querySelectorAll(".form");fi.forEach(function(n,t){n.addEventListener("click",function(){t!=2&&(f.classList.add("modal-appearance"),f.classList.remove("modal-disappearance"),f.style.visibility="visible");t==2&&(a.classList.add("modal-appearance"),a.classList.remove("modal-disappearance"),a.style.visibility="visible")})});ui.forEach(function(n,t){n.addEventListener("click",function(){f.classList.add("modal-disappearance");f.classList.remove("modal-appearance");f.querySelector(".feed-form").reset();t==2&&(a.classList.add("modal-disappearance"),a.classList.remove("modal-appearance"),a.querySelector(".feed-form").reset())})});const yt=document.querySelector(".gamburger"),s=document.querySelector(".header__nav"),v=document.querySelector(".header__menu");let k=0;yt.addEventListener("click",()=>{ei(),yt.classList.toggle("gamburger-active"),s.classList.contains("header__nav-bottom")&&k==2&&(s.classList.add("header__nav-top"),s.classList.remove("header__nav-bottom"),v.classList.add("header__menu-top"),v.classList.remove("header__menu-bottom")),s.classList.contains("header__nav-top")&&k==1?(s.classList.add("header__nav-bottom"),s.classList.remove("header__nav-top"),v.classList.add("header__menu-bottom"),v.classList.remove("header__menu-top")):(s.classList.add("header__nav-bottom"),v.classList.add("header__menu-bottom"),v.style.visibility="visible")});const tt=document.querySelector(".gallery__wrapper"),n=document.querySelectorAll(".gallery__item"),pt=document.querySelector(".gallery__next"),wt=document.querySelector(".gallery__prev"),y=document.querySelectorAll(".gallery__dots");let i=1,bt=n.length*33.3/100*tt.offsetWidth;tt.style.width=bt+"px";let oi=bt/n.length+"px";n.forEach(function(n){n.style.width=oi});wt.addEventListener("click",ot);pt.addEventListener("click",kt);wt.addEventListener("click",si);pt.addEventListener("click",hi);const h=document.querySelector(".max-wrapper"),ci=h.querySelector(".max-wrapper__right"),li=h.querySelector(".max-wrapper__left");let c,r=[];n.forEach(function(n){r.push(n.cloneNode(!0))});r.forEach(function(n){n.classList.add("max-wrapper-item");n.classList.remove("gallery__item-svape");h.append(n)});n.forEach(function(n,t){n.addEventListener("click",function(){this==n&&(h.style.display="block",c=t,r[t].style.display="block")})});li.addEventListener("click",ai);ci.addEventListener("click",vi);h.addEventListener("click",function(n){h==n.target&&(h.style.display="none",r.forEach(function(n){n.style.display="none"}))});let u;y.forEach(function(n,t){n.addEventListener("click",function(i){n==i.target&&(yi(),n.classList.add("gallery__dots-svape"),u=t,pi(),wi())})});const bi=document.querySelector(".slider"),d=document.querySelectorAll(".slide");let st=document.querySelector(".location").offsetWidth;const ki=document.querySelector(".location__left"),di=document.querySelector(".location__right");let dt=document.querySelectorAll(".slider__item"),t=[],p=document.querySelector("#maxW"),e;for(let n=0;n<dt.length;n++)t[n]=dt[n].cloneNode(!0);let gi=[];for(let n=0;n<d.length;n++)gi[n]=d[n],d[n].remove();let it=0,gt=0;ht();ht();ki.addEventListener("click",rt);di.addEventListener("click",rt);const nr=document.querySelector("#left"),tr=document.querySelector("#right");t.forEach(function(n){n.classList.add("max-wrapper-item");p.append(n)});nr.addEventListener("click",ir);tr.addEventListener("click",rr);p.addEventListener("click",function(n){p==n.target&&(p.style.display="none",t.forEach(function(n){n.style.display="none"}))});const o=document.querySelector("#popap-location"),ur=document.querySelector("#form2"),fr=document.querySelector(".modal__close2");ur.addEventListener("click",function(){o.classList.add("modal-appearance");o.classList.remove("modal-disappearance");o.style.visibility="visible"});fr.addEventListener("click",function(){o.classList.add("modal-disappearance");o.classList.remove("modal-appearance");o.querySelector(".feed-form").reset()});new Swiper(".swiper",{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},loop:!0});const er=document.querySelectorAll(".swiper-slide");er.forEach(function(n,i){n.addEventListener("click",function(){p.style.display="block";t[i-1].style.display="block";e=i})});const or=document.querySelectorAll("#show"),sr=document.querySelectorAll("#hide"),ut=document.querySelectorAll(".info");or.forEach(function(n,t){n.addEventListener("click",function(){ut[t].querySelector("#info__navigation-none").style.display="none";ut[t].querySelector(".info__text").classList.toggle("info-visible")})});sr.forEach(function(n,t){n.addEventListener("click",function(){ut[t].querySelector("#info__navigation-none").style.display="flex";ut[t].querySelector(".info__text").classList.toggle("info-visible")})});const hr=document.querySelectorAll("#retouch"),w=document.querySelector(".price__popap"),g=w.querySelector("input"),cr=document.querySelector("#sum"),ni=document.querySelectorAll(".price__sum");let ct=0;hr.forEach(function(n,t){n.addEventListener("click",function(){w.classList.add("modal-appearance");w.classList.remove("modal-disappearance");w.style.visibility="visible";ct=t})});cr.addEventListener("click",function(n){if(g.validity.rangeOverflow)return g.setCustomValidity("Можно заказать до 99 ретушей для одного заказа"),!1;n.preventDefault();setTimeout(function(){if(!g.validity.rangeOverflow){let n=ni[ct].textContent.replace(/₽/g,""),t=+n+g.value*250+" ₽";ni[ct].textContent=t;w.classList.add("modal-disappearance");w.classList.remove("modal-appearance");g.value=""}},200)});const lr=document.querySelector("#input-reviews");let ti=document.createElement("img");const nt=document.querySelector(".form-textarea"),l=document.querySelector("#reviews__form"),ft=l.querySelector(".feed-form"),et=l.querySelector(".modal1__wrapper");lr.addEventListener("change",n=>{let t=Array.from(n.target.files);t.forEach(n=>{const t=new FileReader;t.onload=()=>{ti.src=t.result};n&&t.readAsDataURL(n)});ar(ti)});let lt=nt.offsetHeight,at=et.offsetHeight,vt=ft.offsetHeight;const ii=document.querySelectorAll(".feed-form"),ri=[];ii.forEach(function(n){n.name&&ri.push(n.name)});ri.forEach(function(n){n.addEventListener("blur",function(){n.validity.patternMismatch&&this.setCustomValidity("Введите имя в формате: кириллица или латинские символы")})});const b=document.querySelectorAll(".sent");ii.forEach(function(n){n.addEventListener("submit",async function(t){n.querySelector(".button").addEventListener("click",function(){this.disabled=!0});t.preventDefault();let r=new FormData(n),i;if(i=await fetch("mailer/smart.php",{method:"POST",body:r}),i.ok?n.querySelector(".button").addEventListener("click",function(){this.disabled=!1}):i.ok==!1&&n.querySelector(".button").addEventListener("click",function(){this.disabled=!1}),i.ok&&n.locations!==undefined)o.classList.add("modal-disappearance"),o.classList.remove("modal-appearance"),b[1].classList.toggle("sent-hidden"),setTimeout(function(){b[1].classList.toggle("sent-hidden");console.log(1)},2500),n.reset();else if(i.ok&&n.review!==undefined){l.classList.add("modal-disappearance");l.classList.remove("modal-appearance");b[0].classList.toggle("sent-hidden");setTimeout(function(){b[0].classList.toggle("sent-hidden")},2500);const t=document.querySelector(".form-preview");n.reset();t.innerHTML="";et.style.height=at+"px";ft.style.height=vt+"px";nt.style.height=lt+"px";l.style.overflow="visible"}else i.ok&&(f.classList.add("modal-disappearance"),f.classList.remove("modal-appearance"),b[1].classList.toggle("sent-hidden"),setTimeout(function(){b[1].classList.toggle("sent-hidden")},2500),n.reset())})})});